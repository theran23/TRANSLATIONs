[Bitcoin: Multisig vs. Shamir’s Secret Sharing Scheme](https://medium.com/clavestone/bitcoin-multisig-vs-shamirs-secret-sharing-scheme-ea83a888f033)




개인은 주로 보유한 비트코인을 하나의 개인키로 저장한다. 

아주 간단히 말해, 보유자의 비트코인을 움직이기 위해 오직 하나의 키가 피룡하다. 

하지만 상당한 양의 비트코인을 저장하는 조직의 경우에, 이러한 접근은 안전하지 않다. 



대신에, 조직의 비트코인을 제어하는 것은 다수의 사람들에 의해 분배되어야한다. 

왜냐하면, 지출시의 checks와 balance를 보장해야하고, 또한 아무도 도난의 타겟이되지 않는 것을 보장해야하기 때문이다 .



여러명에게 통제권을 분산하기 위해, 흔히 3 가지 방법이 사용된다. 

1. 멀티시그
2. SSSS
3. HSMs



의심의 여지 없이, 비트코인 멀티시그는 대부분의 물리적 비트코인에 투자하는 조직에 대해 최선의 선택이다. 비트코인 멀티시그는 은 잘 검증되었으며(시험되어졌으며), 이용하기 싸고, 유연하고, 감사 가능하며 일반 트랜잭션을 지원한다. 

그러나 오늘날 SSSS는 여전히 일부 조직에서 사용중이며 틈새 시장을 자리잡고 있으므로, 

그들의 저장 옵션을 탐색하는 조직들을 돕기 위해 두 가지(멀티시그와 SSSS)를 비교하고자 한다. 



| -                     | SSSS                             | BITCOIN MULTISIG            |
| --------------------- | -------------------------------- | --------------------------- |
| Compatibility         | 비트코인과 알트코인              | 비트코인과 소수의 알트코인  |
| Setup Risk            | 특정 지점에서의 실패가 불가피    | 실패의 지점이 없음          |
| Setup Difficulty      | 기술적 경험을 필요로 함          | 기존의 솔루션 사용 가능     |
| Transaction frequency | 일회용, 장기적 storage 용        | 다회용, 정기적 trx용        |
| Key loss resolution   | 완전히 새로운 지갑이 필요        | 새로운 키로 바꿀 수 있음    |
| Auditablitiy          | 참여자는 보안성을 입증할 수 없음 | 참여자는 보안성을 입증 가능 |
| Privacy               | onchain에서 볼 수 없음           | onchain에서 볼 수 있음.     |



# Private Key Basics

개인키는 차 키에 비유될 수 있다. 어떤 사람의 차 키는 그의 차를 움직일 수 있는 유일한 키이고, 모든 차들은 각자 유일한 키를 가지고 있다. 비트코인에서, 개인키는 공개적으로 볼 수 있는 주소에 저장된 비트코인을 움직이기 위해 사용되어진다. 

"지갑은" 어떤 개인이나 조직에 의해 소유 주소의 집합이다. 주소에 대한 주소와 키는 하나의 마스터 개인 키에 의해 생성된다. 

마스터 개인키를 제어하는 누구나, 지갑을 제어할 수 잇다. 만약 영구적으로 키를 잃어버리거나 키가 파괴된다면, 마스터 개인 키에 연관된 비트코인은 영원히 잃어버리는 것으로 간주된다. 

# The Problem with Single Keys

조직이 비트코인을 하나의 마스터 개인키로 보관하고자할 때, 그들은 두가지 선택권이 있다. 

1. 한 사람에게 키를 주는 것: 키를 받은 한 사람은 "fat-finger" 실수를 저지를 수 있다. 예를 들어, 장치를 잃어버리거나, 비밀번호를 잊거나, 도둑들에 의해 위협을 받거나, 또는 자금의 일부를 가지려는 유혹에 빠질 수도 있다. 그리고 그들이 휴가중이거나 아프다면 돌아올 때까지 비트코인을 사용할 수 없다. 만약 비밀번호를 아무에게도 말하지 않고 죽는다면... 비트코인은 아주 장기적인 "투자"가 될 것이다. 
2. 여러 사람과 키를 공유: 한 사람이 키를 분실하거나 한 사람이 키를 사용할 수 없는 경우에도 비트코인을 이동시킬 수 있다. 그러나 각 키 소유자는 위에서 설명한 것과 같은 위험에 노출되어있다. 각 트랜잭션에 누구의 키가 사용되었는 지 확인할 수 없다는 것은 도난 시 책임이 거의 없다는 것을 의미한다.

# Shamir’s Secret Sharing Scheme

SSSS: 는 회사가 그들의 마스터 개인 키를 여러 사람이 쪼개어 갖도록 한다. 

**배경**
비트코인 이전에 발견된 SSSS는 작은 조각 데이터(개인 키와 같은)를 여러 부분으로 나누려는 암호화 기법이다. 이 기법은 완전히 사용자가 정의를 할 수 있다. 사용자는 전체 부분의 수(m)와, 전체를 재생성하기 위해 필요한 부분의 수(n)을 정의할 수 있다. 



SSSS를 사용할 때, 한 부분을 가지는 것으로 전체 데이터의 일부분을 알 수 없다. 또한 임의의 n부분의 조합은 순서와 상관 없이 데이터를 알 수 있다. 

흔한 예시는 2-of-3- split이다. 이것은 데이터를 3 부분으로 나눈다. 그리고 3 부분 중 2 부분은 데이터를 재생성하기 위해 필요하다. 거의 모든 m-of-n 조합이 가능하다. (m,n이 자연수인 경우에)



**비트코인에서의 SSSS** 

비트코인에 적용할 때, 조직은 SSSS를 마스터 개인키를 다른 부분으로 쪼개는 데 사용할 수 있다. 그리고 그 쪼개진 다른 부분들은 오직 n개 중 m개가 조합되었을 때만 드러날 것이다. 

이러한 개인적인 부분들은 조직의 조직의 다양한 멤버에게 분배되어질 수 있다. 

![image-20220112180223019](/Users/serankim/Library/Application Support/typora-user-images/image-20220112180223019.png)

**장점**

- **표준 단일 키보다** 우수함 **:** SSSS가 안전하게 생성되는 한( ***setup risk*** 참조) 장기 비트코인 투자의 도난, 손실 및 내부 작업으로부터 조직을 보호할 수 있다. 보관된 비트코인에 액세스하려면 다른 참여자가 알아채지 못한 상태로 여러 부분이 손상되어야 합니다.
- **알트코인 지원**: 알트코인에 투자하는 사람은( 권장 x ) SSSS를 사용하여 개인 키를 분할할 수 있습니다.
- **참여자의 잔액을 숨기기** SSSS를 사용하면 부분을 소유한 개인들이 비트코인 지갑의 잔액을 볼 수 없습니다. 이는 설정 후 특정 사람들과 선택적으로 공유할 수 있어 회사의 비트코인 보유에 대한 개인 정보 보호와 분산 키 보안의 이점을 모두 제공합니다.

**단점**

- **Setup risk:** 개별 부분을 생성할 때 개인 키를 먼저 생성한 다음 SSSS 소프트웨어로 분할해야 한다.  설정 중에 악의적인 행위자가 연루된 경우, SSSS는 개인 키가 도난당하거나 잘못 다루어지는 것을 방지할 수없다.
- **일회용:** SSSS 기법은 특정한 조건 일회적으로만 안전하다. 개인 키가 m of n 부분을 사용하여 재구성 되면, 개인 키는 더 이상 안전하지 않다.
- **not auditable:** SSSS 참여자가 보관된 비트코인을 지출하는 데 부분이이 필요한지 확인할 방법이 없다. 개인 키의 여러 전체 복사본은 생성되어 다른 곳에 저장되었을 수 있다.
- **기술:** SSSS를 직접 설정하려면 약간의 기술 지식이 필요하다.

## 

**SSSS in the Wild**

**SSSS Solutions**

# Bitcoin Multisig

**배경**

비트코인은 기본적으로 여러 유형의 스마트 계약을 지원한다. 가장 일반적으로 사용되는 스마트 계약 중 하나는 멀티시그 입니다. SSSS와 매우 유사하게, 사용자는 *n* 명 중 *m* 명이 개인 키를 사용하여 계약에 서명 할 때까지 사용할 수 없는 비트코인 주소를 생성할 수 있다.

비트코인 멀티시그에서 각 참여자는 자신의 개인 키를 가진다. 새로운 멀티시그 지갑을 생성하려면 각 참가자 는 자신의 개인 키를 안전하게 하면서 다른 참여자 에게 *공개* 키만 공개하면 된다.

다중서명 지갑으로 보내어진 모든 비트코인을 다시 이동 시키기 위해서는 그 시점부터 *n개의* 키 중 *m개*가 필요하다. 



**장점**

- **최소화된 setup risk:** SSSS와 달리, 설정 시 또는 트랜잭션을 수행할 때 개별 개인 키를 다른 참여자에게 공개해야 하는 시점이 없다.
- **다회용:** 개인 키가 다른 사람에게 공개되지 않기 때문에 비트코인 멀티시그는 여러 번 사용되어도 안전하다.
- **auditable:** 멀티시그 참여자는 비트코인이 멀티시그와 멀티시그의 매개변수에 포함되어 있는지 암호학적으로 확인할 수 있습니다. SSSS와 달리 다중서명 이외의 다른 사람은 비트코인에 액세스할 수 없다고 확신할 수 있다.
- **key loss를 다루기 쉬움 :** 어떤 참여자가 개인 키를 잃으면, 나머지 n 명 중 m명은은 쉽게 비트코인을 새로운 멀티시그 주소로 이동시키고 잃어버린 키를 대체하는 새로운 키를 생성할 수 있다.
- **기존 솔루션 사용 가능:** 멀티시그를 설정하고 관리하는 기술적 과정들은 여러 스타트업에서 매우 사용자 친화적으로 만들어졌다. 

**단점**

- **알트** 코인에 **대한 제한된 지원:** 멀티시그 계약은 비트코인 친화적(native)하다. 이것은 즉 알트코인은 같은 방식으로 작동할 필요가 없다는 것을 의미한다. ([2017년의 이더리움 패리티 해킹(Ethereum Parity hack)에](https://medium.com/chain-cloud-company-blog/parity-multisig-hack-again-b46771eaa838) 의해 입증된 바와 같이) 

  비트코인의 코드베이스를 기반으로 하는 알트코인의 작은 하위 섹션만이 비트코인 스타일의 멀티시그 를[지원](https://en.bitcoinwiki.org/wiki/Dogecoin) 한다( 예: [Litecoin](https://en.bitcoinwiki.org/wiki/Litecoin) 및 [Dogecoin )](https://en.bitcoinwiki.org/wiki/Dogecoin) .

- **공개 키를 잃어버리지기:** 자신의 개인 키를 안전하게 유지하는 것 외에도 각 참가자는 손실 시 지갑을 재구성할 수 있도록 다른 모든 참가자의 공개 키 사본을 보관해야 한다.

- **개인 정보 보호:** 멀티시그 트랜잭션(거래)은 블록체인에 특수한 트랜잭션(거래) 유형으로 명확하게 표시된다. 상대방(및 블록체인 정보 회사)은 비트코인이 멀티시그 지갑에 보관되어 있는지와 이를 사용하는 데 필요한 키 개수를 알 수 있다[1]. 또한 멀티시그의 모든 참여자는 회사의 비트코인 잔액 및 거래를 볼 수 있다.

**multisig solutions**

---

**정리**

**멀티시그를 사용하는 경우**

- 조직이 비트코인 보유량에 대한 통제권을 안정적으로 분배해야 하는 *대부분* 의 상황.

**SSSS를 사용하는 경우**

- 알트코인 보유에 대한 통제권을 절대적으로 분배해야 할 때.
- 비트코인에 대한 통제가 분산되었음을 제3자가 관찰할 수 없도록 해야 할 때.
- SSSS를 설정하는 사람에게 필요한 신뢰로 인해 조직 소유보다 개인 소유에 더 적합
- 멀티시그의 개인 키 중 하나 또는 전체를 공개해야 하는 경우(SSSS는 멀티시그와 함께 사용할 수 있음).



